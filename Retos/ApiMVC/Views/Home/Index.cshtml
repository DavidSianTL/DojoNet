@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Bienvenido</h1>
    <p>Entretentede con este juego de carrito</p>
</div>
<div id="juego-container">
    <pre id="juego"></pre>
</div>
<script>
    const ancho = 20;
    const alto = 10;
    let jugadorPos = Math.floor(alto / 2);
    let obstaculoX = ancho - 1;
    let obstaculoY = Math.floor(Math.random() * alto);
    let puntos = 0;
    let intervalo;

    function dibujarJuego() {
        let output = '';
        for (let y = 0; y < alto; y++) {
            for (let x = 0; x < ancho; x++) {
                if (x === 1 && y === jugadorPos) {
                    output += '🚗'; // Carrito
                } else if (x === obstaculoX && y === obstaculoY) {
                    output += '#';
                } else {
                    output += '.';
                }
            }
            output += '\n';
        }
        output += `\nPuntos: ${puntos}`;
        document.getElementById('juego').textContent = output;
    }

    function actualizar() {
        obstaculoX--;
        if (obstaculoX < 0) {
            obstaculoX = ancho - 1;
            obstaculoY = Math.floor(Math.random() * alto);
            puntos++;
        }

        // Colisión
        if (obstaculoX === 1 && obstaculoY === jugadorPos) {
            clearInterval(intervalo);
            alert("💥 ¡Perdiste! Puntos: " + puntos);
        }

        dibujarJuego();
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowUp' && jugadorPos > 0) {
            jugadorPos--;
        } else if (e.key === 'ArrowDown' && jugadorPos < alto - 1) {
            jugadorPos++;
        }
    });

    // Iniciar el juego
    dibujarJuego();
    intervalo = setInterval(actualizar, 200);
</script>
<style>
    #juego-container {
        background-color: #000;
        color: #0f0;
        padding: 15px;
        font-family: monospace;
        font-size: 16px;
        width: fit-content;
        border: 2px solid #0f0;
        margin: 0 auto;
    }
</style>