@model IEnumerable<ProyectoDojoGeko.Models.RolesViewModel>
@{
    ViewData["Title"] = "Gestión de Roles - GEKO Sistemas de Seguridad";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}

<!-- CSS específico para roles -->
<link rel="stylesheet" href="~/css/Rol.css" />

<div class="empresas-container">
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">
                <i class="fas fa-user-tag"></i>
                Gestión de Roles
            </h1>
            <p class="page-subtitle">
                Administra los roles disponibles en el sistema
            </p>
        </div>
        <div class="header-actions">
            <a href="@Url.Action("Crear", "Roles")" class="btn-create">
                <i class="fas fa-plus"></i>
                <span>Nuevo Rol</span>
            </a>
        </div>
    </div>

    <div class="table-container">
        <table class="empresas-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre del Rol</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var rol in Model)
                {
                    <tr>
                        <td>@rol.IdRol</td>
                        <td>@rol.NombreRol</td>
                        
                        <td>
                            <span class="estado-badge @(rol.Estado ? "activo" : "inactivo")">
                                @(rol.Estado ? "Activo" : "Inactivo")
                            </span>
                        </td>
                        <td>
                            <div class="actions-container">
                                <a href="@Url.Action("Editar", "Roles", new { id = rol.IdRol })" class="btn-action edit">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="javascript:void(0);" class="btn-action delete"
                                   onclick="abrirModalEliminarRol(@rol.IdRol, '@rol.NombreRol')">
                                    <i class="fas fa-trash-alt"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<!-- Modal para eliminar rol -->
<div id="modalEliminarRol" class="modal-custom">
    <div class="modal-content-custom">
        <button id="cerrarModalRol" class="modal-close-custom" title="Cerrar">&times;</button>
        <h3>Desactivar Rol</h3>
        <p>¿Estás seguro que deseas desactivar el rol <strong id="nombreRolEliminar"></strong>?</p>
        <form id="formEliminarRol" method="post">
            <input type="hidden" name="id" id="idRolEliminar" />
            <button type="button" id="cancelarEliminarRol" class="btn btn-secondary">Cancelar</button>
            <button type="submit" class="btn btn-danger">Sí, desactivar</button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        function abrirModalEliminarRol(id, nombre) {
            document.getElementById("idRolEliminar").value = id;
            document.getElementById("nombreRolEliminar").textContent = nombre;
            document.getElementById("formEliminarRol").action = "/Roles/Eliminar/" + id;
            document.getElementById("modalEliminarRol").style.display = "block";
        }

        // Cierra el modal desde el botón × o cancelar
        document.getElementById("cerrarModalRol").addEventListener("click", function () {
            document.getElementById("modalEliminarRol").style.display = "none";
        });

        document.getElementById("cancelarEliminarRol").addEventListener("click", function () {
            document.getElementById("modalEliminarRol").style.display = "none";
        });

        // Cierra el modal si haces clic fuera de él
        window.addEventListener("click", function (event) {
            const modal = document.getElementById("modalEliminarRol");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });
    </script>
}