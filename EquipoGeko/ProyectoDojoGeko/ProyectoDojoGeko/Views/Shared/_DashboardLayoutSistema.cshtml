@* Nuevo dashboard para el sistema de Gestión de Vacaciones *@
@{
    ViewData["Title"] = "Dashboard Sistema - GEKO Sistmas";
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString()?.ToLower();
    var rolesString = Context.Session.GetString("Roles") ?? "";
    var userRoles = rolesString.Split(',').Where(r => !string.IsNullOrEmpty(r)).ToList();
    bool empleado = userRoles.Contains("Empleado");
    bool teamLider = userRoles.Contains("TeamLider");
    bool puedeHacerTodo = userRoles.Contains("SuperAdministrador");
    bool puedeCrear = userRoles.Any(r => new[] { "SuperAdministrador", "Administrador", "Editor" }.Contains(r));
    bool puedeEditar = userRoles.Any(r => new[] { "SuperAdministrador", "Administrador", "Editor" }.Contains(r));
    bool puedeEliminar = userRoles.Any(r => new[] { "SuperAdministrador", "Administrador" }.Contains(r));
    bool reportes = userRoles.Contains("Visualizador");
}

<div class="app-container">
    <!-- Barra Lateral -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="~/imagenes/images.webp" alt="GEKO Security Systems Logo" width="120" height="40" class="h-auto" />
                <div class="logo-text"></div>
            </div>
        </div>
        <nav class="sidebar-nav">
            <ul class="nav-list">
                <!-- Solo módulos permitidos para Gestión de Vacaciones -->
                <li class="nav-item @(currentController == "empleados" ? "empleados-active" : "")">
                    <a href="@Url.Action("Index", "Empleados")" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>Empleados</span>
                    </a>
                </li>
                <li class="nav-item @(currentController == "solicitudes" ? "solicitudes-active show" : "")">
                    <a href="javascript:void(0)" class="nav-link submenu-toggle">
                        <i class="fas fa-hand-point-up"></i>
                        <span>
                            Solicitudes<span>
                                <i class="fas fa-chevron-down submenu-arrow"></i>
                        </span>
                    </a>
                    <ul class="submenu">
                        <li class="submenu-item @(currentController == "solicitudes" ? "active" : "")">
                            <a href="@Url.Action("Index", "Solicitudes")" class="submenu-link">
                                <i class="fas fa-list-ol"></i>
                                <span>Listar Solicitudes</span>
                            </a>
                        </li>
                        <li class="submenu-item">
                            <a href="@Url.Action("Crear", "Solicitudes")" class="submenu-link">
                                <i class="fas fa-plus"></i>
                                <span>Crear Solicitud</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- Otros módulos futuros -->
                <li class="nav-item @(currentController == "reportesvacaciones" ? "reportes-active" : "")">
                    <a href="#" class="nav-link disabled">
                        <i class="fas fa-chart-bar"></i>
                        <span>Reportes (Próximamente)</span>
                    </a>
                </li>
                <li class="nav-item @(currentController == "configuracionvacaciones" ? "configuracion-active" : "")">
                    <a href="#" class="nav-link disabled">
                        <i class="fas fa-cog"></i>
                        <span>Configuración (Próximamente)</span>
                    </a>
                </li>
            </ul>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="~/imagenes/avatar.png" alt="User" />
                    </div>
                    <div class="user-details">
                        <div class="user-name">@User.Identity?.Name</div>
                        <div class="user-role">@string.Join(", ", userRoles)</div>
                    </div>
                </div>
            </div>
        </nav>
    </aside>
    <main class="main-content">
        @RenderBody()
    </main>
</div>

@section Styles {
    @RenderSection("Styles", required: false)
}
@section Scripts {
    @RenderSection("Scripts", required: false)
}
