@model ProyectoDojoGeko.Models.SolicitudViewModel
@{
    ViewData["Title"] = "Detalle de la Solicitud - GEKO Sistemas de Seguridad";
    Layout = "~/Views/Shared/_DashboardLayoutSistema.cshtml";
    var empleado = ViewBag.Empleado;
}

<link rel="stylesheet" href="~/css/empleado-detalle.css" />
<link rel="stylesheet" href="~/css/detalle-solicitud.css" />

<div class="empleado-detalle-container">
    <!-- Encabezado -->
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">
                <i class="fas fa-id-card icon-naranja"></i>

                Detalle de Solicitud
            </h1>
            <p class="page-subtitle">Información detallada sobre la solicitud de vacaciones</p>
        </div>
    </div>

    <div class="empleado-card">
        <!-- Tarjeta de resumen -->
        <div class="info-box">
            <h2 class="empleado-nombre-s">@Model.Encabezado.NombreEmpleado</h2>
            <p class="empleado-id">Número de solicitud: <strong>@Model.Encabezado.IdSolicitud</strong></p>
            <div class="estado-box">
                <span class="badge estado-@Model.Encabezado.Estado">
                    <i class="fas fa-info-circle"></i> @Model.Encabezado.Estado
                </span>
            </div>
            <div class="detalle-mini-grid">
                <div class="stat-item">
                    <div class="stat-label">Días solicitados</div>
                    <div class="stat-value">@Model.Encabezado.DiasSolicitadosTotal días</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Fecha de creación</div>
                    <div class="stat-value">@Model.Encabezado.FechaIngresoSolicitud.ToString("dd/MM/yyyy")</div>
                </div>
            </div>
        </div>

        <!-- Información del Empleado -->
        <div class="info-section">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-user icon-naranja"></i> Información del Empleado
                </h3>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-id-card icon-naranja"></i> Código</div>
                    <div class="info-value">@empleado?.CodigoEmpleado</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-building icon-naranja"></i> Departamento</div>
                    <div class="info-value">@empleado?.Departamento</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-briefcase icon-naranja"></i> Puesto</div>
                    <div class="info-value">@empleado?.Puesto</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-calendar-plus icon-naranja"></i> Fecha de Ingreso</div>
                    <div class="info-value">@(empleado?.FechaIngreso?.ToString("dd/MM/yyyy") ?? "")</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-envelope icon-naranja"></i> Correo</div>
                    <div class="info-value">@empleado?.CorreoInstitucional</div>
                </div>
                <div class="info-item">
                    <div class="info-label"><i class="fas fa-phone icon-naranja"></i> Teléfono</div>
                    <div class="info-value">@empleado?.Telefono</div>
                </div>
            </div>
        </div>

        <!-- Tabla de fechas -->
        <div class="info-section">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fas fa-calendar-alt icon-naranja"></i> Fechas Solicitadas
                </h3>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-bordered text-center align-middle tabla-fechas-solicitadas">
                    <thead class="table-light">
                        <tr>
                            <th>Fecha Inicio</th>
                            <th>Fecha Fin</th>
                            <th>Días Hábiles</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var d in Model.Detalles)
                        {
                            <tr>
                                <td>@d.FechaInicio.ToString("dd/MM/yyyy")</td>
                                <td>@d.FechaFin.ToString("dd/MM/yyyy")</td>
                                <td>@d.DiasHabilesTomados</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Acciones -->
    <div class="acciones-box">
        <form asp-action="Autorizar" method="post" class="inline-form">
            <input type="hidden" name="idSolicitud" value="@Model.Encabezado.IdSolicitud" />
            <button type="submit" class="btn btn-success boton-accion">
                <i class="fas fa-check"></i> Autorizar
            </button>
        </form>
        <form asp-action="Rechazar" method="post" class="inline-form">
            <input type="hidden" name="idSolicitud" value="@Model.Encabezado.IdSolicitud" />
            <button type="submit" class="btn btn-danger boton-accion">
                <i class="fas fa-times"></i> Rechazar
            </button>
        </form>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/empresas.css" />
    <link rel="stylesheet" href="~/css/detalle-solicitud.css" />
}

<style>
    .acciones-box {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 2rem;
        padding: 1.5rem;
        background-color: #f9f9f9;
        border-top: 1px solid #ddd;
        border-radius: 0 0 12px 12px;
    }

    .inline-form {
        display: inline-block;
    }

    .boton-accion {
        padding: 0.6rem 1.5rem;
        font-size: 1rem;
        border-radius: 8px;
        min-width: 140px;
        transition: all 0.3s ease;
    }

    .boton-accion i {
        margin-right: 8px;
    }

    .tabla-fechas-solicitadas td, .tabla-fechas-solicitadas th {
        padding: 1rem !important;
        font-size: 1rem;
    }
</style>
