@model csProductosViewModel
@{
    ViewData["Title"] = "Products Page";
}

<div class="form-control">
    <form id="forms-products" class="col-12">
        <div class="row">
            <div class="col-6">
                <label for="FechaCompra" class="form-label">Fecha</label>
                <input type="date" class="form-control" id="FechaCompra" placeholder="Fecha de Compra">
            </div>

            <div class="col-6">
                <label for="Ubicacion" class="form-label">Ubicación</label>
                <input type="text" class="form-control" id="Ubicacion" placeholder="Ubicación" disabled>
            </div>

            <div class="col-6">
                <label for="Producto" class="form-label">Producto</label>
                <select class="form-select" id="Producto" placeholder="Producto">
                    <option selected>Seleccione un producto</option>
                    <option value="1">ASUS RTX 3070</option>
                    <option value="2">RAM 16GB DDR5  6000MH</option>
                    <option value="3">Laptop gamer Asus Rog Strig G16</option>
                    <option value="4">Monitor HP 16 pulgadas</option>
                    <option value="5">Teléfono Xiaomi Redmi Note 10</option>
                    <option value="6">Kit de limpieza para computadoras</option>
                    <option value="7">Cable LAN de 5 metros</option>
                    <option value="8">Mause gaming Logitech G305</option>
                    <option value="9">Teclado gaming Xtech </option>
                    <option value="10">Webcam resolución 1080p</option>
                </select>
            </div>

            <div class="col-6">
                <label for="Precio" class="form-label">Precio</label>
                <input type="number" class="form-control" id="Precio" placeholder="Precio" disabled>
            </div>

            <div class="col-6">
                <label for="Cantidad" class="form-label">Cantidad</label>
                <input type="number" class="form-control" id="Cantidad" placeholder="Cantidad">
            </div>

            <div class="col-6">
                <label for="Total" class="form-label">Total</label>
                <input type="number" class="form-control" id="Total" placeholder="Total" disabled>
            </div>

            <div style="margin-top:10px;" class="col-6">
                <button type="submit" class="btn btn-primary w-100">Aceptar</button>
            </div>
            <div style="margin-top:10px;" class="col-6">
                <button type="reset" class="btn btn-danger w-100">Cancelar</button>
            </div>
        </div>
    </form>
    <div id="mensaje" class="mt-3"></div>
</div>

<script>
    const precioProducto = () => {
        const producto = document.getElementById('Producto').value;
        let precio = 0;

        if (producto === "1") {
            precio = 3750.00;
        } else if (producto === "2") {
            precio = 1500.00;
        } else if (producto === "3") {
            precio = 12000.00;
        } else if (producto === "4") {
            precio = 1200.00;
        } else if (producto === "5") {
            precio = 2500.00;
        } else if (producto === "6") {
            precio = 150.00;
		} else if (producto === "7") {
			precio = 50.00;
		} else if (producto === "8") {
			precio = 800.00;
		} else if (producto === "9") {
			precio = 600.00;
		} else if (producto === "10") {
			precio = 500.00;
		}

        document.getElementById('Precio').value = precio;
        calcularTotal();

        // Actualizar el mensaje
        const mensaje = document.getElementById('mensaje');
        mensaje.innerText = `Has seleccionado el producto con ID: ${producto} y precio: Q${precio}`;
    }

    const calcularTotal = () => {
        const precio = parseFloat(document.getElementById('Precio').value) || 0;
        const cantidad = parseInt(document.getElementById('Cantidad').value) || 0;
        const total = precio * cantidad;
        document.getElementById('Total').value = total;
    }

    document.getElementById('Producto').addEventListener('change', precioProducto);
    document.getElementById('Cantidad').addEventListener('input', calcularTotal);

    document.getElementById('forms-products').addEventListener('submit', (e) => {
        e.preventDefault();

        const fechaCompra = document.getElementById('FechaCompra').value;
        const ubicacion = document.getElementById('Ubicacion').value;
        const producto = document.getElementById('Producto').value;
        const precio = document.getElementById('Precio').value;
        const cantidad = document.getElementById('Cantidad').value;
        const total = document.getElementById('Total').value;

        const factura = {
            fechaCompra: fechaCompra,
            ubicacion: ubicacion,
            producto: producto,
            precio: precio,
            cantidad: cantidad,
            total: total
        };

        Swal.fire({
            title: "Factura",
            text: JSON.stringify(factura, null, 2),
            showClass: {
                popup: 'animate__animated animate__fadeInUp animate__faster'
            },
            hideClass: {
                popup: 'animate__animated animate__fadeOutDown animate__faster'
            }
        });
    });

    document.getElementById('forms-products').addEventListener('reset', (e) => {
        e.preventDefault();

        document.getElementById('FechaCompra').value = '';
        document.getElementById('Ubicacion').value = '';
        document.getElementById('Producto').value = '';
        document.getElementById('Precio').value = '';
        document.getElementById('Cantidad').value = '';
        document.getElementById('Total').value = '';

        Swal.fire({
            title: "Cancelar Compra",
            text: "¿Estás seguro/a?",
            confirmButtonColor: "#3085d6",
            confirmButtonText: "Sí",
            cancelButtonColor: "#d33",
            cancelButtonText: "No",
            showClass: {
                popup: 'animate__animated animate__fadeInUp animate__faster'
            },
            hideClass: {
                popup: 'animate__animated animate__fadeOutDown animate__faster'
            }
        });

        // Limpiar el mensaje
        const mensaje = document.getElementById('mensaje');
        mensaje.innerText = '';
    });
</script>
