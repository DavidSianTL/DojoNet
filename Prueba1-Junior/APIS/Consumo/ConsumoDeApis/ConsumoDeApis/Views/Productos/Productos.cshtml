@{
	ViewData["title"] = "Productos";
}

<h1>Listado de productos</h1>
<br />
<table id="table-products" class="table table-bordered">
	<thead>
		<tr>
			<th>Id</th>
			<th>Producto</th>
			<th>Numero de serie</th>
		</tr>
	</thead>
	<tbody id="listaProductos">
		<tr>
			<td>1</td>
			<td>Sillón</td>
			<td>8373FIE32</td>
		</tr>
		<tr>
			<td>2</td>
			<td>Ropero</td>
			<td>39RD9292J</td>
		</tr>
	</tbody>
</table>



<script>
	console.log("El codigo javaScript se ejecuta exitosamente");
	async function mostrarProductos(){

		try{
			
			const response = await fetch("https://jsonplaceholder.typicode.com/users")
			const products = await response.json();

			let lista = document.getElementById("listaProductos")
			lista.innerHTML = "";

			products.forEach( producto =>{
				let tableRow = document.createElement("tr");
				
				let idCell = document.createElement("td");
				idCell.textContent = producto.id;

				let nameCell = document.createElement("td");
				nameCell.textContent = producto.username;

				let serialNumberCell = document.createElement("td");
				serialNumberCell.textContent = producto.phone;

				tableRow.appendChild(idCell);
				tableRow.appendChild(nameCell);
				tableRow.appendChild(serialNumberCell);

				lista.appendChild(tableRow);
				
			});
			

	}catch(error){
		console.error("Error al cargar los productos");
	}
	}
		mostrarProductos();
</script>